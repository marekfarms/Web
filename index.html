<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nightshade-Free Meal Planner with Printer-Friendly Shopping List</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e0f7fa 0%, #bbdefb 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            color: #01579b;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #0288d1;
            max-width: 700px;
            margin: 0 auto 20px;
        }
        
        .note {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 0 auto 20px;
            max-width: 700px;
            font-size: 0.95rem;
        }
        
        .controls {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
            justify-content: center;
        }
        
        .btn {
            background: #0288d1;
            color: white;
            border: none;
            padding: 14px 28px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(2, 136, 209, 0.3);
        }
        
        .btn:hover {
            background: #0277bd;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(2, 136, 209, 0.4);
        }
        
        .btn i {
            font-size: 1.2rem;
        }
        
        .btn-generate {
            background: #43a047;
            box-shadow: 0 4px 15px rgba(67, 160, 71, 0.3);
        }
        
        .btn-generate:hover {
            background: #388e3c;
            box-shadow: 0 6px 20px rgba(67, 160, 71, 0.4);
        }
        
        .btn-print {
            background: #8e24aa;
            box-shadow: 0 4px 15px rgba(142, 36, 170, 0.3);
        }
        
        .btn-print:hover {
            background: #7b1fa2;
            box-shadow: 0 6px 20px rgba(142, 36, 170, 0.4);
        }
        
        .btn-print-list {
            background: #f57c00;
            box-shadow: 0 4px 15px rgba(245, 124, 0, 0.3);
        }
        
        .btn-print-list:hover {
            background: #ef6c00;
            box-shadow: 0 6px 20px rgba(245, 124, 0, 0.4);
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .meal-plan {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .shopping-list {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #01579b;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e3f2fd;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #0288d1;
        }
        
        .day-card {
            background: #f5fbff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            border-left: 4px solid #81d4fa;
        }
        
        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0f7fa;
        }
        
        .day-name {
            font-weight: 700;
            font-size: 1.3rem;
            color: #01579b;
        }
        
        .day-date {
            color: #0288d1;
            font-size: 0.9rem;
        }
        
        .meal {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
            background: #e1f5fe;
            position: relative;
        }
        
        .meal-title {
            font-weight: 600;
            color: #0288d1;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .meal-title i {
            font-size: 0.9rem;
        }
        
        .meal-name {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: #01579b;
        }
        
        .meal-ingredients {
            font-size: 0.9rem;
            color: #546e7a;
        }
        
        .meal-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .action-btn {
            background: #0288d1;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .action-btn:hover {
            background: #01579b;
            transform: translateY(-2px);
        }
        
        .swap-btn:hover {
            transform: rotate(90deg);
        }
        
        .recipe-btn {
            background: #43a047;
        }
        
        .recipe-btn:hover {
            background: #2e7d32;
        }
        
        .shopping-items {
            list-style-type: none;
        }
        
        .shopping-item {
            padding: 12px 15px;
            border-bottom: 1px solid #e0f7fa;
            display: flex;
            align-items: center;
        }
        
        .shopping-item:last-child {
            border-bottom: none;
        }
        
        .shopping-item input {
            margin-right: 15px;
            width: 20px;
            height: 20px;
        }
        
        .shopping-item label {
            flex: 1;
            cursor: pointer;
        }
        
        .shopping-item.checked label {
            text-decoration: line-through;
            color: #90a4ae;
        }
        
        .category {
            font-weight: 600;
            color: #01579b;
            margin: 20px 0 10px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #bbdefb;
        }
        
        .category:first-child {
            margin-top: 0;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #0288d1;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        .nightshade-info {
            background: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
            font-size: 0.9rem;
        }
        
        .meal-options {
            display: none;
            position: absolute;
            top: 50px;
            right: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            z-index: 10;
            width: 250px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .meal-option {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .meal-option:hover {
            background: #e3f2fd;
        }
        
        .meal-option:last-child {
            border-bottom: none;
        }
        
        /* Recipe Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
            background: none;
            border: none;
        }
        
        .close-modal:hover {
            color: #000;
        }
        
        .recipe-title {
            font-size: 1.8rem;
            color: #01579b;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .recipe-section {
            margin-bottom: 20px;
        }
        
        .recipe-section h3 {
            color: #0288d1;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #e0f7fa;
        }
        
        .ingredients-list, .instructions-list {
            padding-left: 20px;
        }
        
        .ingredients-list li, .instructions-list li {
            margin-bottom: 8px;
        }
        
        .prep-time {
            display: flex;
            justify-content: space-around;
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .time-item {
            text-align: center;
        }
        
        .time-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #0288d1;
        }
        
        .time-label {
            font-size: 0.9rem;
            color: #546e7a;
        }
        
        /* Printer-friendly styles */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                max-width: 100%;
                padding: 0;
            }
            
            header, .controls, .meal-plan, footer, .nightshade-info {
                display: none;
            }
            
            .shopping-list {
                box-shadow: none;
                padding: 0;
                margin: 0;
                background: white;
            }
            
            .section-title {
                text-align: center;
                border-bottom: 2px solid #000;
                padding-bottom: 10px;
                margin-bottom: 20px;
                color: #000;
            }
            
            .print-header {
                text-align: center;
                margin-bottom: 30px;
            }
            
            .print-header h1 {
                font-size: 2rem;
                color: #000;
                margin-bottom: 10px;
            }
            
            .print-header p {
                color: #555;
            }
            
            .two-column {
                display: flex;
                flex-wrap: wrap;
                gap: 30px;
            }
            
            .column {
                flex: 1;
                min-width: 300px;
            }
            
            .category {
                color: #000;
                border-bottom: 1px solid #000;
                margin-top: 20px;
                padding-bottom: 5px;
            }
            
            .shopping-item {
                border-bottom: 1px solid #ccc;
                padding: 8px 0;
            }
            
            .shopping-item input {
                display: none;
            }
            
            .shopping-item label {
                font-size: 1.1rem;
            }
            
            .shopping-item.checked label {
                text-decoration: line-through;
                color: #888;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-utensils"></i> Nightshade-Free Meal Planner</h1>
            <p class="subtitle">7-Day meal plans with 10 options for each meal + meal swapping + recipes</p>
            <div class="note">
                <i class="fas fa-info-circle"></i> This planner excludes nightshade vegetables (tomatoes, peppers, eggplants, potatoes)
            </div>
        </header>
        
        <div class="controls">
            <button class="btn btn-generate" id="generateBtn">
                <i class="fas fa-random"></i> Generate New Meal Plan
            </button>
            <button class="btn btn-print" id="printBtn">
                <i class="fas fa-print"></i> Print Meal Plan
            </button>
            <button class="btn btn-print-list" id="printListBtn">
                <i class="fas fa-shopping-cart"></i> Print Shopping List
            </button>
        </div>
        
        <div class="content">
            <div class="meal-plan">
                <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Weekly Meal Plan</h2>
                <div id="mealPlanContainer">
                    <!-- Meal plan will be generated here -->
                </div>
            </div>
            
            <div class="shopping-list">
                <h2 class="section-title"><i class="fas fa-shopping-cart"></i> Shopping List</h2>
                <div id="shoppingListContainer">
                    <!-- Shopping list will be generated here -->
                </div>
            </div>
        </div>
        
        <div class="nightshade-info">
            <p><strong>About Nightshades:</strong> Nightshade vegetables include tomatoes, potatoes, eggplants, and peppers. This meal planner avoids these ingredients while still providing nutritious, delicious meals.</p>
        </div>
        
        <footer>
            <p>Created with ❤️ | Nightshade-Free 7-Day Meal Planner</p>
        </footer>
    </div>
    
    <!-- Recipe Modal -->
    <div id="recipeModal" class="modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 class="recipe-title" id="recipeTitle">Recipe Title</h2>
            
            <div class="prep-time">
                <div class="time-item">
                    <div class="time-value" id="prepTime">10</div>
                    <div class="time-label">Prep Time</div>
                </div>
                <div class="time-item">
                    <div class="time-value" id="cookTime">20</div>
                    <div class="time-label">Cook Time</div>
                </div>
                <div class="time-item">
                    <div class="time-value" id="totalTime">30</div>
                    <div class="time-label">Total Time</div>
                </div>
            </div>
            
            <div class="recipe-section">
                <h3><i class="fas fa-list"></i> Ingredients</h3>
                <ul class="ingredients-list" id="ingredientsList">
                    <!-- Ingredients will be populated here -->
                </ul>
            </div>
            
            <div class="recipe-section">
                <h3><i class="fas fa-utensils"></i> Instructions</h3>
                <ol class="instructions-list" id="instructionsList">
                    <!-- Instructions will be populated here -->
                </ol>
            </div>
        </div>
    </div>

    <script>
        // Sample meal data (nightshade-free) with recipes
        const breakfastOptions = [
            {
                name: "Overnight Chia Pudding",
                ingredients: ["chia seeds", "almond milk", "berries", "honey", "vanilla extract"],
                prepTime: 5,
                cookTime: 0,
                totalTime: 5,
                instructions: [
                    "In a jar or container, mix 3 tablespoons of chia seeds with 1 cup of almond milk.",
                    "Add 1 tablespoon of honey and a few drops of vanilla extract.",
                    "Stir well to combine and refrigerate overnight.",
                    "In the morning, top with fresh berries before serving."
                ]
            },
            {
                name: "Greek Yogurt Parfait",
                ingredients: ["Greek yogurt", "granola", "berries", "honey", "almonds"],
                prepTime: 5,
                cookTime: 0,
                totalTime: 5,
                instructions: [
                    "Layer Greek yogurt, granola, and berries in a glass or bowl.",
                    "Repeat layers until the container is full.",
                    "Top with chopped almonds and drizzle with honey.",
                    "Serve immediately or refrigerate until ready to eat."
                ]
            },
            {
                name: "Berry Smoothie Bowl",
                ingredients: ["frozen berries", "banana", "Greek yogurt", "almond milk", "granola", "chia seeds", "honey"],
                prepTime: 10,
                cookTime: 0,
                totalTime: 10,
                instructions: [
                    "Blend frozen berries, banana, Greek yogurt, and almond milk until smooth.",
                    "Pour into a bowl.",
                    "Top with granola, chia seeds, and additional berries.",
                    "Drizzle with honey and serve immediately."
                ]
            },
            {
                name: "Vegetable Omelette",
                ingredients: ["eggs", "spinach", "onion", "mushrooms", "cheese", "salt", "pepper", "butter"],
                prepTime: 10,
                cookTime: 5,
                totalTime: 15,
                instructions: [
                    "Whisk eggs with salt and pepper in a bowl.",
                    "Heat butter in a non-stick pan over medium heat.",
                    "Add chopped onion and mushrooms, sauté for 2 minutes.",
                    "Add spinach and cook until wilted.",
                    "Pour in egg mixture and cook until almost set.",
                    "Sprinkle cheese on one half and fold the omelette.",
                    "Cook for another minute and serve hot."
                ]
            },
            {
                name: "Oatmeal with Nuts and Fruit",
                ingredients: ["rolled oats", "almond milk", "banana", "walnuts", "cinnamon", "honey"],
                prepTime: 5,
                cookTime: 5,
                totalTime: 10,
                instructions: [
                    "Combine oats and almond milk in a saucepan.",
                    "Cook over medium heat, stirring occasionally, until creamy.",
                    "Transfer to a bowl and top with sliced banana and chopped walnuts.",
                    "Sprinkle with cinnamon and drizzle with honey."
                ]
            },
            {
                name: "Avocado Toast with Hemp Seeds",
                ingredients: ["bread", "avocado", "lemon", "hemp seeds", "salt", "pepper", "red pepper flakes"],
                prepTime: 5,
                cookTime: 3,
                totalTime: 8,
                instructions: [
                    "Toast bread until golden brown.",
                    "Mash half an avocado with lemon juice, salt, and pepper.",
                    "Spread the avocado mixture on the toast.",
                    "Sprinkle with hemp seeds and red pepper flakes.",
                    "Serve immediately."
                ]
            },
            {
                name: "Green Smoothie",
                ingredients: ["spinach", "banana", "apple", "cucumber", "coconut water", "ginger", "mint"],
                prepTime: 10,
                cookTime: 0,
                totalTime: 10,
                instructions: [
                    "Add all ingredients to a blender.",
                    "Blend until smooth and creamy.",
                    "Pour into a glass and serve immediately.",
                    "Garnish with fresh mint if desired."
                ]
            },
            {
                name: "Protein Pancakes",
                ingredients: ["rolled oats", "banana", "protein powder", "almond milk", "blueberries", "maple syrup"],
                prepTime: 10,
                cookTime: 10,
                totalTime: 20,
                instructions: [
                    "Blend oats, banana, protein powder, and almond milk until smooth.",
                    "Heat a non-stick pan over medium heat and lightly grease.",
                    "Pour batter to form pancakes and cook until bubbles form on top.",
                    "Flip and cook until golden brown.",
                    "Serve with blueberries and maple syrup."
                ]
            },
            {
                name: "Breakfast Quinoa Bowl",
                ingredients: ["quinoa", "almond milk", "berries", "almonds", "cinnamon", "honey"],
                prepTime: 5,
                cookTime: 15,
                totalTime: 20,
                instructions: [
                    "Cook quinoa according to package instructions using almond milk instead of water.",
                    "Transfer to a bowl and let cool slightly.",
                    "Top with berries, chopped almonds, and a sprinkle of cinnamon.",
                    "Drizzle with honey and serve warm or cold."
                ]
            },
            {
                name: "Cottage Cheese Bowl",
                ingredients: ["cottage cheese", "berries", "cucumber", "hemp seeds", "honey", "mint"],
                prepTime: 5,
                cookTime: 0,
                totalTime: 5,
                instructions: [
                    "Place cottage cheese in a bowl.",
                    "Top with berries, sliced cucumber, and hemp seeds.",
                    "Drizzle with honey and garnish with fresh mint.",
                    "Serve immediately."
                ]
            }
        ];
        
        const lunchOptions = [
            {
                name: "Zucchini Noodles with Pesto",
                ingredients: ["zucchini", "basil", "pine nuts", "parmesan cheese", "olive oil", "garlic", "salt", "pepper"],
                prepTime: 15,
                cookTime: 5,
                totalTime: 20,
                instructions: [
                    "Use a spiralizer to create zucchini noodles.",
                    "In a food processor, combine basil, pine nuts, parmesan, garlic, and olive oil to make pesto.",
                    "Toss zucchini noodles with pesto until well coated.",
                    "Season with salt and pepper to taste.",
                    "Serve immediately."
                ]
            },
            {
                name: "Quinoa Salad with Cucumber",
                ingredients: ["quinoa", "cucumber", "red onion", "feta cheese", "olives", "lemon", "olive oil", "mint"],
                prepTime: 15,
                cookTime: 15,
                totalTime: 30,
                instructions: [
                    "Cook quinoa according to package instructions and let cool.",
                    "Dice cucumber and red onion, and chop mint.",
                    "In a large bowl, combine quinoa, cucumber, onion, feta, and olives.",
                    "Whisk together lemon juice and olive oil, then pour over salad.",
                    "Toss to combine and garnish with mint before serving."
                ]
            },
            {
                name: "Butternut Squash Soup",
                ingredients: ["butternut squash", "carrots", "onion", "garlic", "vegetable broth", "coconut milk", "ginger", "nutmeg"],
                prepTime: 15,
                cookTime: 30,
                totalTime: 45,
                instructions: [
                    "Peel and chop butternut squash, carrots, and onion.",
                    "Sauté onion and garlic in a large pot until fragrant.",
                    "Add chopped vegetables, vegetable broth, and ginger.",
                    "Simmer until vegetables are tender, about 25 minutes.",
                    "Blend until smooth, then stir in coconut milk and nutmeg.",
                    "Season with salt and pepper to taste."
                ]
            },
            {
                name: "Turkey and Avocado Wrap",
                ingredients: ["turkey slices", "avocado", "spinach", "cucumber", "whole wheat tortilla", "hummus", "sprouts"],
                prepTime: 10,
                cookTime: 0,
                totalTime: 10,
                instructions: [
                    "Spread hummus on the tortilla.",
                    "Layer turkey slices, avocado slices, spinach, cucumber, and sprouts.",
                    "Roll tightly and cut in half if desired.",
                    "Serve immediately."
                ]
            },
            {
                name: "Mushroom and Lentil Salad",
                ingredients: ["lentils", "mushrooms", "cucumber", "red onion", "feta cheese", "olive oil", "lemon", "oregano"],
                prepTime: 15,
                cookTime: 25,
                totalTime: 40,
                instructions: [
                    "Cook lentils according to package instructions and let cool.",
                    "Sauté mushrooms until golden brown.",
                    "Dice cucumber and red onion.",
                    "Combine lentils, mushrooms, cucumber, and onion in a bowl.",
                    "Whisk together olive oil, lemon juice, and oregano for dressing.",
                    "Toss with dressing and top with crumbled feta before serving."
                ]
            },
            {
                name: "Cauliflower Rice Bowl",
                ingredients: ["cauliflower rice", "chickpeas", "cucumber", "avocado", "tahini", "lemon", "parsley"],
                prepTime: 15,
                cookTime: 5,
                totalTime: 20,
                instructions: [
                    "Sauté cauliflower rice in a pan until tender.",
                    "Dice cucumber and avocado.",
                    "Warm chickpeas in a separate pan.",
                    "Combine cauliflower rice, chickpeas, cucumber, and avocado in a bowl.",
                    "Whisk together tahini and lemon juice for dressing.",
                    "Drizzle with dressing and garnish with parsley."
                ]
            },
            {
                name: "Vegetable Sushi Rolls",
                ingredients: ["sushi rice", "nori", "cucumber", "avocado", "carrot", "sesame seeds", "rice vinegar"],
                prepTime: 30,
                cookTime: 20,
                totalTime: 50,
                instructions: [
                    "Cook sushi rice according to package instructions and season with rice vinegar.",
                    "Cut cucumber, avocado, and carrot into thin strips.",
                    "Place nori sheet on a bamboo mat and spread rice evenly.",
                    "Add vegetable strips in a line across the center.",
                    "Roll tightly using the bamboo mat and slice into pieces.",
                    "Sprinkle with sesame seeds and serve with soy sauce."
                ]
            },
            {
                name: "Chicken and Broccoli Salad",
                ingredients: ["chicken breast", "broccoli", "red onion", "olive oil", "lemon", "dill", "feta cheese"],
                prepTime: 15,
                cookTime: 15,
                totalTime: 30,
                instructions: [
                    "Cook chicken breast and slice into strips.",
                    "Steam broccoli until tender-crisp.",
                    "Dice red onion and chop dill.",
                    "Combine chicken, broccoli, and onion in a bowl.",
                    "Whisk together olive oil and lemon juice for dressing.",
                    "Toss with dressing, add dill, and top with crumbled feta."
                ]
            },
            {
                name: "Sweet Potato and Black Bean Bowl",
                ingredients: ["sweet potato", "black beans", "avocado", "red onion", "lime", "cilantro", "olive oil"],
                prepTime: 15,
                cookTime: 25,
                totalTime: 40,
                instructions: [
                    "Cube sweet potato and roast at 400°F until tender.",
                    "Warm black beans in a small pot.",
                    "Dice avocado and red onion, and chop cilantro.",
                    "Combine sweet potato and black beans in a bowl.",
                    "Top with avocado, onion, and cilantro.",
                    "Drizzle with lime juice and olive oil."
                ]
            },
            {
                name: "Egg Salad Lettuce Wraps",
                ingredients: ["eggs", "avocado", "celery", "red onion", "mayo", "mustard", "lettuce leaves", "lemon"],
                prepTime: 15,
                cookTime: 10,
                totalTime: 25,
                instructions: [
                    "Hard boil eggs and chop finely.",
                    "Dice avocado, celery, and red onion.",
                    "Mix eggs with avocado, celery, and onion.",
                    "Add mayo, mustard, and lemon juice to taste.",
                    "Spoon mixture into lettuce leaves and serve."
                ]
            }
        ];
        
        const dinnerOptions = [
            {
                name: "Creamy Mushroom Risotto",
                ingredients: ["arborio rice", "mushrooms", "onion", "vegetable broth", "white wine", "parmesan cheese", "butter", "parsley"],
                prepTime: 15,
                cookTime: 25,
                totalTime: 40,
                instructions: [
                    "Heat vegetable broth in a separate pot and keep warm.",
                    "Sauté mushrooms until golden, then set aside.",
                    "In a large pan, sauté onion until translucent.",
                    "Add arborio rice and toast for 2 minutes.",
                    "Add white wine and stir until absorbed.",
                    "Gradually add warm broth, one ladle at a time, stirring constantly.",
                    "When rice is creamy and al dente, stir in mushrooms, butter, and parmesan.",
                    "Garnish with parsley and serve immediately."
                ]
            },
            {
                name: "Herb-Crusted Salmon with Broccoli",
                ingredients: ["salmon fillets", "broccoli", "lemon", "olive oil", "dill", "parsley", "garlic", "salt", "pepper"],
                prepTime: 10,
                cookTime: 15,
                totalTime: 25,
                instructions: [
                    "Preheat oven to 400°F.",
                    "Mix chopped herbs, garlic, olive oil, salt, and pepper to make crust.",
                    "Pat salmon dry and coat with herb mixture.",
                    "Place salmon on a baking sheet and roast for 12-15 minutes.",
                    "Steam broccoli and toss with olive oil, lemon juice, salt, and pepper.",
                    "Serve salmon with broccoli and lemon wedges."
                ]
            },
            {
                name: "Chicken and Vegetable Stir Fry",
                ingredients: ["chicken breast", "broccoli", "carrots", "snap peas", "ginger", "garlic", "soy sauce", "sesame oil"],
                prepTime: 15,
                cookTime: 10,
                totalTime: 25,
                instructions: [
                    "Slice chicken breast into thin strips.",
                    "Chop vegetables into bite-sized pieces.",
                    "Heat sesame oil in a wok or large pan over high heat.",
                    "Add chicken and cook until browned, then remove.",
                    "Add vegetables and stir-fry for 3-4 minutes.",
                    "Add ginger and garlic, cook for 30 seconds.",
                    "Return chicken to pan, add soy sauce, and cook until heated through."
                ]
            },
            {
                name: "Lemon Herb Chicken with Asparagus",
                ingredients: ["chicken breast", "asparagus", "lemon", "olive oil", "thyme", "rosemary", "garlic", "salt", "pepper"],
                prepTime: 10,
                cookTime: 20,
                totalTime: 30,
                instructions: [
                    "Preheat oven to 425°F.",
                    "Season chicken with salt, pepper, and minced garlic.",
                    "Place chicken on a baking sheet and roast for 15 minutes.",
                    "Add asparagus to the pan, drizzle with olive oil and lemon juice.",
                    "Sprinkle with thyme and rosemary.",
                    "Roast for another 10 minutes until chicken is cooked through."
                ]
            },
            {
                name: "Shrimp and Broccoli Alfredo",
                ingredients: ["shrimp", "fettuccine", "broccoli", "heavy cream", "garlic", "butter", "parmesan cheese", "parsley"],
                prepTime: 15,
                cookTime: 15,
                totalTime: 30,
                instructions: [
                    "Cook fettuccine according to package instructions.",
                    "Steam broccoli until tender-crisp.",
                    "In a pan, melt butter and sauté garlic until fragrant.",
                    "Add shrimp and cook until pink, about 2-3 minutes per side.",
                    "Add heavy cream and parmesan cheese, stirring until smooth.",
                    "Combine with pasta and broccoli, garnish with parsley."
                ]
            },
            {
                name: "Beef and Broccoli Stir Fry",
                ingredients: ["beef strips", "broccoli", "carrots", "ginger", "garlic", "soy sauce", "sesame oil", "green onions"],
                prepTime: 15,
                cookTime: 10,
                totalTime: 25,
                instructions: [
                    "Heat sesame oil in a wok or large pan over high heat.",
                    "Add beef strips and cook until browned, then remove.",
                    "Add broccoli and carrots, stir-fry for 3-4 minutes.",
                    "Add ginger and garlic, cook for 30 seconds.",
                    "Return beef to pan, add soy sauce, and cook until heated through.",
                    "Garnish with chopped green onions before serving."
                ]
            },
            {
                name: "Stuffed Bell Peppers (Nightshade-Free)",
                ingredients: ["bell peppers", "quinoa", "black beans", "corn", "onion", "cheese", "cumin", "cilantro"],
                prepTime: 20,
                cookTime: 30,
                totalTime: 50,
                instructions: [
                    "Preheat oven to 375°F.",
                    "Cut tops off bell peppers and remove seeds.",
                    "Cook quinoa according to package instructions.",
                    "Sauté onion until translucent, then mix with quinoa, black beans, corn, and spices.",
                    "Stuff peppers with the quinoa mixture and top with cheese.",
                    "Bake for 25-30 minutes until peppers are tender."
                ]
            },
            {
                name: "Zucchini Lasagna",
                ingredients: ["zucchini", "ricotta", "spinach", "marinara sauce", "mozzarella", "basil", "oregano"],
                prepTime: 20,
                cookTime: 40,
                totalTime: 60,
                instructions: [
                    "Preheat oven to 375°F.",
                    "Slice zucchini lengthwise into thin strips.",
                    "In a bowl, mix ricotta with chopped spinach, basil, and oregano.",
                    "Spread a layer of marinara in the bottom of a baking dish.",
                    "Layer zucchini strips, ricotta mixture, and marinara, repeating.",
                    "Top with mozzarella cheese.",
                    "Bake for 35-40 minutes until bubbly and golden."
                ]
            },
            {
                name: "Cod with Lemon Butter Sauce",
                ingredients: ["cod fillets", "lemon", "butter", "garlic", "parsley", "asparagus", "salt", "pepper"],
                prepTime: 10,
                cookTime: 12,
                totalTime: 22,
                instructions: [
                    "Season cod fillets with salt and pepper.",
                    "Heat butter in a pan over medium-high heat.",
                    "Add cod and cook for 3-4 minutes per side until golden.",
                    "Remove cod and keep warm.",
                    "Add garlic to the pan and cook for 30 seconds.",
                    "Add lemon juice and parsley, then pour over cod.",
                    "Serve with steamed asparagus."
                ]
            },
            {
                name: "Vegetable Curry with Cauliflower Rice",
                ingredients: ["cauliflower", "carrots", "zucchini", "coconut milk", "curry powder", "ginger", "garlic", "cilantro"],
                prepTime: 15,
                cookTime: 20,
                totalTime: 35,
                instructions: [
                    "Chop vegetables into bite-sized pieces.",
                    "Heat oil in a large pan and sauté garlic and ginger until fragrant.",
                    "Add curry powder and cook for 30 seconds.",
                    "Add vegetables and cook for 5 minutes.",
                    "Pour in coconut milk and simmer for 15 minutes until vegetables are tender.",
                    "Serve over cauliflower rice and garnish with cilantro."
                ]
            }
        ];

        // Days of the week
        const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
        
        // Current meal plan
        let currentPlan = {};
        
        // Generate meal plan
        function generateMealPlan() {
            const mealPlanContainer = document.getElementById('mealPlanContainer');
            mealPlanContainer.innerHTML = '';
            
            currentPlan = {};
            
            days.forEach(day => {
                // Select random meals for breakfast, lunch, and dinner
                const breakfast = breakfastOptions[Math.floor(Math.random() * breakfastOptions.length)];
                const lunch = lunchOptions[Math.floor(Math.random() * lunchOptions.length)];
                const dinner = dinnerOptions[Math.floor(Math.random() * dinnerOptions.length)];
                
                currentPlan[day] = {
                    breakfast,
                    lunch,
                    dinner
                };
                
                // Create day card
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                
                // Get date for the day (simplified for demo)
                const date = new Date();
                date.setDate(date.getDate() + days.indexOf(day));
                const formattedDate = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                
                dayCard.innerHTML = `
                    <div class="day-header">
                        <div class="day-name">${day}</div>
                        <div class="day-date">${formattedDate}</div>
                    </div>
                    <div class="meal" data-day="${day}" data-meal="breakfast">
                        <div class="meal-title"><i class="fas fa-sun"></i> Breakfast</div>
                        <div class="meal-name">${breakfast.name}</div>
                        <div class="meal-ingredients">${breakfast.ingredients.join(', ')}</div>
                        <div class="meal-actions">
                            <button class="action-btn swap-btn" title="Swap Meal"><i class="fas fa-sync-alt"></i></button>
                            <button class="action-btn recipe-btn" title="View Recipe"><i class="fas fa-book-open"></i></button>
                        </div>
                        <div class="meal-options"></div>
                    </div>
                    <div class="meal" data-day="${day}" data-meal="lunch">
                        <div class="meal-title"><i class="fas fa-cloud-sun"></i> Lunch</div>
                        <div class="meal-name">${lunch.name}</div>
                        <div class="meal-ingredients">${lunch.ingredients.join(', ')}</div>
                        <div class="meal-actions">
                            <button class="action-btn swap-btn" title="Swap Meal"><i class="fas fa-sync-alt"></i></button>
                            <button class="action-btn recipe-btn" title="View Recipe"><i class="fas fa-book-open"></i></button>
                        </div>
                        <div class="meal-options"></div>
                    </div>
                    <div class="meal" data-day="${day}" data-meal="dinner">
                        <div class="meal-title"><i class="fas fa-moon"></i> Dinner</div>
                        <div class="meal-name">${dinner.name}</div>
                        <div class="meal-ingredients">${dinner.ingredients.join(', ')}</div>
                        <div class="meal-actions">
                            <button class="action-btn swap-btn" title="Swap Meal"><i class="fas fa-sync-alt"></i></button>
                            <button class="action-btn recipe-btn" title="View Recipe"><i class="fas fa-book-open"></i></button>
                        </div>
                        <div class="meal-options"></div>
                    </div>
                `;
                
                mealPlanContainer.appendChild(dayCard);
            });
            
            // Add event listeners for swap buttons
            document.querySelectorAll('.swap-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const mealDiv = this.closest('.meal');
                    const day = mealDiv.dataset.day;
                    const mealType = mealDiv.dataset.meal;
                    showMealOptions(mealDiv, day, mealType);
                });
            });
            
            // Add event listeners for recipe buttons
            document.querySelectorAll('.recipe-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const mealDiv = this.closest('.meal');
                    const day = mealDiv.dataset.day;
                    const mealType = mealDiv.dataset.meal;
                    showRecipe(day, mealType);
                });
            });
            
            generateShoppingList();
        }
        
        // Show meal options for swapping
        function showMealOptions(mealDiv, day, mealType) {
            const optionsContainer = mealDiv.querySelector('.meal-options');
            optionsContainer.innerHTML = '';
            optionsContainer.style.display = 'block';
            
            let options = [];
            if (mealType === 'breakfast') options = breakfastOptions;
            if (mealType === 'lunch') options = lunchOptions;
            if (mealType === 'dinner') options = dinnerOptions;
            
            options.forEach(option => {
                // Skip the current meal
                if (option.name === currentPlan[day][mealType].name) return;
                
                const optionDiv = document.createElement('div');
                optionDiv.className = 'meal-option';
                optionDiv.textContent = option.name;
                optionDiv.addEventListener('click', () => {
                    swapMeal(day, mealType, option);
                    optionsContainer.style.display = 'none';
                });
                optionsContainer.appendChild(optionDiv);
            });
            
            // Close options when clicking outside
            document.addEventListener('click', function closeOptions(e) {
                if (!mealDiv.contains(e.target)) {
                    optionsContainer.style.display = 'none';
                    document.removeEventListener('click', closeOptions);
                }
            });
        }
        
        // Swap a meal in the plan
        function swapMeal(day, mealType, newMeal) {
            currentPlan[day][mealType] = newMeal;
            
            // Update the display
            const mealDiv = document.querySelector(`.meal[data-day="${day}"][data-meal="${mealType}"]`);
            mealDiv.querySelector('.meal-name').textContent = newMeal.name;
            mealDiv.querySelector('.meal-ingredients').textContent = newMeal.ingredients.join(', ');
            
            // Regenerate shopping list
            generateShoppingList();
        }
        
        // Show recipe in modal
        function showRecipe(day, mealType) {
            const meal = currentPlan[day][mealType];
            const modal = document.getElementById('recipeModal');
            
            document.getElementById('recipeTitle').textContent = meal.name;
            document.getElementById('prepTime').textContent = meal.prepTime;
            document.getElementById('cookTime').textContent = meal.cookTime;
            document.getElementById('totalTime').textContent = meal.totalTime;
            
            // Populate ingredients
            const ingredientsList = document.getElementById('ingredientsList');
            ingredientsList.innerHTML = '';
            meal.ingredients.forEach(ingredient => {
                const li = document.createElement('li');
                li.textContent = ingredient;
                ingredientsList.appendChild(li);
            });
            
            // Populate instructions
            const instructionsList = document.getElementById('instructionsList');
            instructionsList.innerHTML = '';
            meal.instructions.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                instructionsList.appendChild(li);
            });
            
            // Show modal
            modal.style.display = 'flex';
        }
        
        // Close modal
        function closeRecipeModal() {
            document.getElementById('recipeModal').style.display = 'none';
        }
        
        // Generate shopping list from meal plan
        function generateShoppingList() {
            const shoppingListContainer = document.getElementById('shoppingListContainer');
            shoppingListContainer.innerHTML = '';
            
            // Collect all ingredients
            const allIngredients = [];
            for (const day in currentPlan) {
                allIngredients.push(...currentPlan[day].breakfast.ingredients);
                allIngredients.push(...currentPlan[day].lunch.ingredients);
                allIngredients.push(...currentPlan[day].dinner.ingredients);
            }
            
            // Count ingredient occurrences
            const ingredientCount = {};
            allIngredients.forEach(ingredient => {
                ingredientCount[ingredient] = (ingredientCount[ingredient] || 0) + 1;
            });
            
            // Categorize ingredients (simplified)
            const categories = {
                "Produce": ["zucchini", "basil", "garlic", "broccoli", "asparagus", "spinach", "cucumber", "red onion", "lemon", "carrots", "snap peas", "ginger", "butternut squash", "avocado", "banana", "berries", "mushrooms", "onion", "green onions", "mint", "thyme", "rosemary", "dill", "parsley", "sprouts", "cauliflower", "sweet potato", "celery", "corn", "bell peppers", "apple", "lime", "lettuce leaves", "cilantro", "parsley"],
                "Dairy": ["parmesan cheese", "butter", "Greek yogurt", "heavy cream", "feta cheese", "cheese", "mozzarella", "ricotta", "cottage cheese", "mayo", "mustard"],
                "Meat & Seafood": ["salmon fillets", "chicken breast", "shrimp", "turkey slices", "beef strips", "cod fillets"],
                "Pantry": ["pine nuts", "olive oil", "arborio rice", "vegetable broth", "white wine", "chia seeds", "almond milk", "granola", "almonds", "soy sauce", "sesame oil", "coconut milk", "nutmeg", "honey", "vanilla extract", "hummus", "rolled oats", "walnuts", "cinnamon", "hemp seeds", "red pepper flakes", "protein powder", "coconut water", "nori", "rice vinegar", "quinoa", "black beans", "marinara sauce", "oregano", "cumin", "curry powder", "tahini", "maple syrup"],
                "Bakery": ["bread", "whole wheat tortilla", "sushi rice"]
            };
            
            // Create shopping list by category
            for (const category in categories) {
                const categoryItems = [];
                
                categories[category].forEach(ingredient => {
                    if (ingredientCount[ingredient]) {
                        categoryItems.push({
                            name: ingredient,
                            count: ingredientCount[ingredient]
                        });
                    }
                });
                
                if (categoryItems.length > 0) {
                    const categoryTitle = document.createElement('div');
                    categoryTitle.className = 'category';
                    categoryTitle.textContent = category;
                    shoppingListContainer.appendChild(categoryTitle);
                    
                    const list = document.createElement('ul');
                    list.className = 'shopping-items';
                    
                    categoryItems.forEach(item => {
                        const listItem = document.createElement('li');
                        listItem.className = 'shopping-item';
                        listItem.innerHTML = `
                            <input type="checkbox" id="${item.name}">
                            <label for="${item.name}">${item.name}${item.count > 1 ? ` (${item.count})` : ''}</label>
                        `;
                        
                        // Add event listener for checkbox
                        const checkbox = listItem.querySelector('input');
                        checkbox.addEventListener('change', function() {
                            if (this.checked) {
                                listItem.classList.add('checked');
                            } else {
                                listItem.classList.remove('checked');
                            }
                        });
                        
                        list.appendChild(listItem);
                    });
                    
                    shoppingListContainer.appendChild(list);
                }
            }
        }
        
        // Print functionality
        function printMealPlan() {
            window.print();
        }
        
        // Print shopping list in two-column format
        function printShoppingList() {
            // Create a new window for the printer-friendly list
            const printWindow = window.open('', '_blank');
            
            // Collect all ingredients
            const allIngredients = [];
            for (const day in currentPlan) {
                allIngredients.push(...currentPlan[day].breakfast.ingredients);
                allIngredients.push(...currentPlan[day].lunch.ingredients);
                allIngredients.push(...currentPlan[day].dinner.ingredients);
            }
            
            // Count ingredient occurrences
            const ingredientCount = {};
            allIngredients.forEach(ingredient => {
                ingredientCount[ingredient] = (ingredientCount[ingredient] || 0) + 1;
            });
            
            // Categorize ingredients
            const categories = {
                "Produce": ["zucchini", "basil", "garlic", "broccoli", "asparagus", "spinach", "cucumber", "red onion", "lemon", "carrots", "snap peas", "ginger", "butternut squash", "avocado", "banana", "berries", "mushrooms", "onion", "green onions", "mint", "thyme", "rosemary", "dill", "parsley", "sprouts", "cauliflower", "sweet potato", "celery", "corn", "bell peppers", "apple", "lime", "lettuce leaves", "cilantro", "parsley"],
                "Dairy": ["parmesan cheese", "butter", "Greek yogurt", "heavy cream", "feta cheese", "cheese", "mozzarella", "ricotta", "cottage cheese", "mayo", "mustard"],
                "Meat & Seafood": ["salmon fillets", "chicken breast", "shrimp", "turkey slices", "beef strips", "cod fillets"],
                "Pantry": ["pine nuts", "olive oil", "arborio rice", "vegetable broth", "white wine", "chia seeds", "almond milk", "granola", "almonds", "soy sauce", "sesame oil", "coconut milk", "nutmeg", "honey", "vanilla extract", "hummus", "rolled oats", "walnuts", "cinnamon", "hemp seeds", "red pepper flakes", "protein powder", "coconut water", "nori", "rice vinegar", "quinoa", "black beans", "marinara sauce", "oregano", "cumin", "curry powder", "tahini", "maple syrup"],
                "Bakery": ["bread", "whole wheat tortilla", "sushi rice"]
            };
            
            // Generate HTML for printer-friendly list
            let printContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Shopping List</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            margin: 20px;
                            color: #333;
                        }
                        .print-header {
                            text-align: center;
                            margin-bottom: 30px;
                        }
                        .print-header h1 {
                            font-size: 2rem;
                            color: #000;
                            margin-bottom: 10px;
                        }
                        .print-header p {
                            color: #555;
                        }
                        .two-column {
                            display: flex;
                            flex-wrap: wrap;
                            gap: 30px;
                        }
                        .column {
                            flex: 1;
                            min-width: 300px;
                        }
                        .category {
                            font-weight: bold;
                            color: #000;
                            margin: 20px 0 10px;
                            padding-bottom: 5px;
                            border-bottom: 1px solid #000;
                        }
                        .shopping-item {
                            padding: 5px 0;
                            border-bottom: 1px solid #ccc;
                        }
                        .shopping-item label {
                            font-size: 1.1rem;
                        }
                    </style>
                </head>
                <body>
                    <div class="print-header">
                        <h1>Shopping List</h1>
                        <p>7-Day Nightshade-Free Meal Plan</p>
                    </div>
                    <div class="two-column">
                        <div class="column">
            `;
            
            // Split categories between two columns
            const categoryKeys = Object.keys(categories);
            const midpoint = Math.ceil(categoryKeys.length / 2);
            
            // First column
            for (let i = 0; i < midpoint; i++) {
                const category = categoryKeys[i];
                const categoryItems = [];
                
                categories[category].forEach(ingredient => {
                    if (ingredientCount[ingredient]) {
                        categoryItems.push({
                            name: ingredient,
                            count: ingredientCount[ingredient]
                        });
                    }
                });
                
                if (categoryItems.length > 0) {
                    printContent += `<div class="category">${category}</div><ul>`;
                    
                    categoryItems.forEach(item => {
                        printContent += `<li class="shopping-item"><label>${item.name}${item.count > 1 ? ` (${item.count})` : ''}</label></li>`;
                    });
                    
                    printContent += `</ul>`;
                }
            }
            
            printContent += `
                        </div>
                        <div class="column">
            `;
            
            // Second column
            for (let i = midpoint; i < categoryKeys.length; i++) {
                const category = categoryKeys[i];
                const categoryItems = [];
                
                categories[category].forEach(ingredient => {
                    if (ingredientCount[ingredient]) {
                        categoryItems.push({
                            name: ingredient,
                            count: ingredientCount[ingredient]
                        });
                    }
                });
                
                if (categoryItems.length > 0) {
                    printContent += `<div class="category">${category}</div><ul>`;
                    
                    categoryItems.forEach(item => {
                        printContent += `<li class="shopping-item"><label>${item.name}${item.count > 1 ? ` (${item.count})` : ''}</label></li>`;
                    });
                    
                    printContent += `</ul>`;
                }
            }
            
            printContent += `
                        </div>
                    </div>
                </body>
                </html>
            `;
            
            printWindow.document.write(printContent);
            printWindow.document.close();
            printWindow.print();
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            generateMealPlan();
            
            // Event listeners
            document.getElementById('generateBtn').addEventListener('click', generateMealPlan);
            document.getElementById('printBtn').addEventListener('click', printMealPlan);
            document.getElementById('printListBtn').addEventListener('click', printShoppingList);
            
            // Modal close button
            document.querySelector('.close-modal').addEventListener('click', closeRecipeModal);
            
            // Close modal when clicking outside content
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('recipeModal');
                if (e.target === modal) {
                    closeRecipeModal();
                }
            });
        });
    </script>
</body>
</html>


